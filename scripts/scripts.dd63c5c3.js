"use strict";angular.module("youMixApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/main/:urlList",{templateUrl:"views/main.html",controller:"youtubeCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/",{templateUrl:"views/inicio.html",controller:"InicioCtrl",controllerAs:"inicio"}).otherwise({redirectTo:"/"})}]);var flag=0;angular.module("youMixApp").controller("youtubeCtrl",["$scope","$routeParams","$location",function(a,b,c){a.flagMain=!1,a.flagLoading=!0,a.state=1,a.playerVars={list:b.urlList,controls:0,autoplay:1},a.stop=function(){flag=0,c.path("/main/"),a=a.$new(!0)},a.$on("youtube.player.playing",function(b,c){0===flag&&(a.playerNow.playVideoAt(c.getPlaylistIndex()),c.setVolume(100),a.playerSecond.playVideoAt(c.getPlaylistIndex()+1),a.prepareVideo(a.playerSecond),flag=1)}),a.prepareVideo=function(b){setTimeout(function(){b.playVideo(),b.setVolume(2),b.pauseVideo(),a.flagLoading=!1},2e3)},a.crossfader=function(){a.flagLoading=!0,1===a.playerNow.getPlayerState()?(a.endVideo(a.playerNow,a.playerSecond),a.state=3):1===a.playerSecond.getPlayerState()&&(a.endVideo(a.playerSecond,a.playerNow),a.state=1)},a.playPause=function(){1===a.state?(a.playerNow.pauseVideo(),a.state=2):3===a.state?(a.playerSecond.pauseVideo(),a.state=4):2===a.state?(a.playerNow.playVideo(),a.state=1):4===a.state?(a.playerSecond.playVideo(),a.state=3):(a.playerNow.playVideo(),a.state=1)},a.startVideo=function(a){function b(){setTimeout(function(){console.log("video2--> "+c),a.setVolume(c),c+=5,c>2&&105>c&&b()},100)}console.log("startVideo--> "+a.getVolume()),a.playVideo();var c=a.getVolume();b()},a.endVideo=function(b,c){function d(){setTimeout(function(){console.log("Video1-----> "+e),b.setVolume(e),e-=5,e>2?d():(b.stopVideo(),a.flagMain?a.flagMain=!1:a.flagMain=!0,b.playVideoAt(c.getPlaylistIndex()+1),a.prepareVideo(b))},200)}console.log("StarVideo-->"+b.getVolume());var e=b.getVolume();a.startVideo(c),d()}}]),angular.module("youMixApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("youMixApp").directive("youtubeVideo",["$window","youtubeEmbedUtils",function(a,b){var c=1,d={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},e="youtube.player.";return a.YTConfig={host:"https://www.youtube.com"},{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(a,f,g){function h(){var b=Array.prototype.slice.call(arguments);a.$apply(function(){a.$emit.apply(a,b)})}function i(b){var c=d[b.data];"undefined"!=typeof c&&h(e+c,a.player,b),a.$apply(function(){a.player.currentState=c})}function j(b){h(e+"ready",a.player,b)}function k(b){h(e+"error",a.player,b)}function l(){var b=angular.copy(a.playerVars);b.start=b.start||a.urlStartTime;var c=new YT.Player(n,{height:a.playerHeight,width:a.playerWidth,videoId:a.videoId,playerVars:b,events:{onReady:j,onStateChange:i,onError:k}});return c.id=n,c}function m(){(a.videoId||a.playerVars.list)&&(a.player&&"function"==typeof a.player.destroy&&a.player.destroy(),a.player=l())}a.utils=b;var n=g.playerId||f[0].id||"unique-youtube-embed-id-"+c++;f[0].id=n,a.playerHeight=a.playerHeight||390,a.playerWidth=a.playerWidth||640,a.playerVars=a.playerVars||{};var o=a.$watch(function(){return a.utils.ready&&("undefined"!=typeof a.videoUrl||"undefined"!=typeof a.videoId||"undefined"!=typeof a.playerVars.list)},function(b){b&&(o(),"undefined"!=typeof a.videoUrl?a.$watch("videoUrl",function(b){a.videoId=a.utils.getIdFromURL(b),a.urlStartTime=a.utils.getTimeFromURL(b),m()}):"undefined"!=typeof a.videoId?a.$watch("videoId",function(){a.urlStartTime=null,m()}):a.$watch("playerVars.list",function(){a.urlStartTime=null,m()}))});a.$watchCollection(["playerHeight","playerWidth"],function(){a.player&&a.player.setSize(a.playerWidth,a.playerHeight)}),a.$on("$destroy",function(){a.player&&a.player.destroy()})}}}]),angular.module("youMixApp").service("youtubeEmbedUtils",["$window","$rootScope",function(a,b){function c(a,b){return a.indexOf(b)>-1}function d(){b.$apply(function(){e.ready=!0})}var e={},f=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,g=/t=(\d+)[ms]?(\d+)?s?/;return e.getIdFromURL=function(a){var b=a.replace(f,"$1");if(c(b,";")){var d=b.split(";");if(c(d[1],"%")){var e=decodeURIComponent(d[1]);b=("http://youtube.com"+e).replace(f,"$1")}else b=d[0]}else c(b,"#")&&(b=b.split("#")[0]);return b},e.getTimeFromURL=function(a){a=a||"";var b=a.match(g);if(!b)return 0;var d=b[0],e=b[1],f=b[2];return"undefined"!=typeof f?(f=parseInt(f,10),e=parseInt(e,10)):c(d,"m")?(e=parseInt(e,10),f=0):(f=parseInt(e,10),e=0),f+60*e},e.ready=!1,"undefined"==typeof YT?(a.onYouTubeIframeAPIReady=d,console.log("Unable to find YouTube iframe library on this page.")):YT.loaded?e.ready=!0:YT.ready(d),e}]),angular.module("youMixApp").directive("playerController",function(){return{templateUrl:"scripts/directives/player-controller.html",restrict:"E"}}),angular.module("youMixApp").controller("InicioCtrl",["$scope","$location",function(a,b){a.msg=!1,a.start=function(){b.path("/main/"+a.urlList)},a.popularLists=[{title:"Lista de Reproducción de Música Pop: Las Canciones más Escuchadas del 2017",tags:"Luis Fonsi, Ed Sheran, Daddy Yankee...",id:"PL4XLEC-MUq2uP2OhrGWdOErGUDrEquhqi"},{title:"Lista de Reproducción de Música Para Bailar en Fiestas 2017 Marzo",tags:"Justin Bieber, Clean Bandit, Maroon 5...",id:"PLI_7Mg2Z_-4L4EPuSYZkTcbLx-OBURStm"},{title:"Las Mejores Canciones de Rock 2017 (Lista de Reproducción Música Rock)",tags:"Imagine Dragons, twenty one pilots, Green Day...",id:"PLinS5uF49IBpbbUhwCzt-49nh7wAf5FeT"}]}]),angular.module("youMixApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/inicio.html",'<div id="contenedor"> <div class="animated fadeInLeft"> <div class="animated pulse infinite"> <h1 class="text-center">YouMix</h1> </div> </div> <br> <div class="animated fadeInRight"> <div class="input-group input-group"> <input ng-model="urlList" type="text" class="form-control" placeholder="Pega el ID de la lista aquí..." required> <span class="input-group-btn"> <button class="btn btn-default" ng-click="start()">Play <span class="glyphicon glyphicon-play" aria-hidden="true"></span></button> </span> </div> <hr> </div> <br> <div class="animated fadeIn animationDelay"> <h4>Más escuchadas</h4> <div class="list-group"> <div ng-repeat="list in popularLists"> <a href="#/main/{{list.id}}" class="list-group-item"> <h5 class="list-group-item-heading"><strong>{{list.title}}</strong></h5> <small class="list-group-item-text">{{list.tags}}</small> </a> </div> </div> </div> </div>'),a.put("views/main.html",'<div ng-class="{\'vidtop-content\' : flagMain, \'video-background\' : !flagMain}"> <div ng-class="{\'videoNext zoom\': flagMain, \'video-foreground\': !flagMain}"> <h4 ng-if="flagMain">Próximo video...</h4> <div ng-class="{\'embed-responsive embed-responsive-16by9\' : flagMain}"> <youtube-video video-id="firstVideo" player="playerNow" player-vars="playerVars"></youtube-video> </div> </div> </div> <div class="vidtop-content"> <div class="controls"> <player-controller></player-controller> </div> </div> <div ng-class="{\'vidtop-content\': !flagMain, \'video-background\': flagMain}"> <div ng-class="{\'videoNext zoom\': !flagMain, \'video-foreground\': flagMain}"> <h4 ng-if="!flagMain">Próximo video...</h4> <div ng-class="{\'embed-responsive embed-responsive-16by9\' : !flagMain}"> <youtube-video video-id="secondVideo" player="playerSecond" player-vars="playerVars"></youtube-video> </div> </div> </div> ')}]);